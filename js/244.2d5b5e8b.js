"use strict";(self["webpackChunkqianfang"]=self["webpackChunkqianfang"]||[]).push([[244],{244:function(t,i,a){a.r(i),a.d(i,{default:function(){return m}});var s=function(){var t=this,i=t._self._c;return i("div",[t.isLoading?i("MyLoading"):i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.datalist,(function(a){return i("van-cell",{key:a.filmId,staticClass:"van-cel",on:{click:function(i){return t.handleChangePage(a.filmId)}}},[i("img",{attrs:{src:a.poster}}),i("div",{staticClass:"direFa"},[i("div",{staticClass:"title"},[t._v(t._s(a.name)+" "+t._s(a.filmType.name))]),i("div",{staticClass:"content"},[i("div",[a.grade?i("span",{staticStyle:{color:"red"}},[t._v("观众评分："+t._s(a.grade))]):i("span",[t._v("暂无评分")])]),i("div",[i("span",[t._v(t._s(t._f("dataFilter")(a.premiereAt))+" 上映")])]),i("div",{staticClass:"actors"},[t._v("主演： "+t._s(t._f("actorsFilter")(a.actors)))]),i("div",[t._v(t._s(a.nation)+" | "+t._s(a.runtime)+"分钟")])])])])})),1)],1)},e=[],n=(a(7658),a(4161)),l=a(6369),d=a(6797),r=a.n(d),o=a(8430);l.ZP.filter("actorsFilter",(t=>void 0===t?"暂无主演":t.map((t=>t.name)).join(" "))),l.ZP.filter("dataFilter",(t=>r()(1e3*t).format("YYYY-MM-DD")));var c={name:"NowPlaying",data(){return{datalist:[],loading:!1,finished:!1,current:1,total:0,prevCityId:-1,isLoading:!1}},activated(){const t=this.$store.state.city.cityId;this.prevCityId!==t&&(this.isLoading=!0,(0,o.Z)({url:`/gateway?cityId=${this.$store.state.city.cityId}&pageNum=1&pageSize=10&type=1&k=5196770`,headers:{"X-Host":"mall.film-ticket.film.list"}}).then((i=>{this.datalist=i.data.data.films,this.total=i.data.data.total,this.isLoading=!1,this.prevCityId=t})))},methods:{onLoad(){this.datalist.length!==this.total||0===this.total?(this.current++,(0,n.Z)({url:"https://m.maizuo.com/gateway?cityId="+this.$store.state.city.cityId+"&pageNum="+this.current+"&pageSize=10&type=1&k=5196770",headers:{"X-Client-Info":'{"a":"3000","ch":"1002","v":"5.0.4","e":"1606697250632532718583809","bc":"440100"}',"X-Host":"mall.film-ticket.film.list"}}).then((t=>{this.datalist=[...this.datalist,...t.data.data.films],this.loading=!1}))):this.finished=!0},handleChangePage(t){this.$router.push(`/detail/${t}`)}}},h=c,f=a(1001),u=(0,f.Z)(h,s,e,!1,null,"7c0b6b30",null),m=u.exports}}]);
//# sourceMappingURL=244.2d5b5e8b.js.map