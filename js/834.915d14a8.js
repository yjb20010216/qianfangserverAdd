"use strict";(self["webpackChunkqianfang"]=self["webpackChunkqianfang"]||[]).push([[834],{7834:function(t,a,i){i.r(a),i.d(a,{default:function(){return u}});var s=function(){var t=this,a=t._self._c;return a("div",[t.isLoading?a("MyLoading"):a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.datalist,(function(i){return a("van-cell",{key:i.filmId,staticClass:"van-cel",on:{click:function(a){return t.handleChangePage(i.filmId)}}},[a("img",{attrs:{src:i.poster}}),a("div",{staticClass:"direFa"},[a("div",{staticClass:"title"},[t._v(t._s(i.name)+" "+t._s(i.filmType.name))]),a("div",{staticClass:"content"},[a("div",[a("span",[t._v(t._s(i.category))])]),a("div",[a("span",[t._v(t._s(t._f("dataFilter")(i.premiereAt))+" 上映")])]),a("div",{staticClass:"actors"},[t._v("主演： "+t._s(t._f("actorsFilter")(i.actors)))]),a("div",[t._v(t._s(i.nation)+" | "+t._s(i.runtime)+"分钟")])])])])})),1)],1)},e=[],n=(i(7658),i(4161)),l=i(6369),d=i(6797),o=i.n(d),r=i(8430);l.ZP.filter("dataFilter",(t=>o()(1e3*t).format("YYYY-MM-DD"))),l.ZP.filter("actorsFilter",(t=>void 0===t?"暂无主演":t.map((t=>t.name)).join(" ")));var c={name:"ComingSoon",data(){return{datalist:[],loading:!1,finished:!1,current:1,total:0,prevCityId:-1,isLoading:!1}},activated(){const t=this.$store.state.city.cityId;this.prevCityId!==t&&(this.isLoading=!0,(0,r.Z)({url:`/gateway?cityId=${t}&pageNum=1&pageSize=10&type=2&k=305929`,headers:{"X-Host":"mall.film-ticket.film.list"}}).then((a=>{this.datalist=a.data.data.films,this.total=a.data.data.total,this.isLoading=!1,this.prevCityId=t})))},methods:{onLoad(){this.datalist.length!==this.total||0===this.total?(this.current++,(0,n.Z)({url:"https://m.maizuo.com/gateway?cityId="+this.$store.state.city.cityId+"&pageNum="+this.current+"&pageSize=10&type=2&k=305929",headers:{"X-Client-Info":'{"a":"3000","ch":"1002","v":"5.0.4","e":"1606697250632532718583809","bc":"440100"}',"X-Host":"mall.film-ticket.film.list"}}).then((t=>{this.datalist=[...this.datalist,...t.data.data.films],this.loading=!1}))):this.finished=!0},handleChangePage(t){this.$router.push(`/detail/${t}`)}}},h=c,f=i(1001),m=(0,f.Z)(h,s,e,!1,null,"1b02aaf0",null),u=m.exports}}]);
//# sourceMappingURL=834.915d14a8.js.map